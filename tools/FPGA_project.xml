<?xml version="1.0" encoding="UTF-8"?>
<vdt-project>
	<interface name="FPGAPprojectInterface">
		<syntax name="RemoteRootSyntax" format="%%ParamValue/%%ProjectName" />
		<syntax name="SourceListSyntax" format="%(%%SourceList%| %)" />
		<syntax name="FilteredSourceListSyntax" format="%(%%FilteredSourceList%| %)" />
		<syntax name="ProgramSyntax" format="%(%%ParamValue%|\n%)" />
		<!-- typedef -->
	</interface>
	<package name="FPGA_package"
	              label="Common parameters for all FPGA projects"
	              interface="FPGAPprojectInterface">
	     <parameter id="RemoteHost" label="Remote Host IP" type="String"
			format="CopyValue" default="192.168.0.122" readonly="false" visible="true" />


		<parameter id="RemoteUser" label="Remote user name" type="String"
			format="CopyValue" default="xilinx" readonly="false" visible="true" />

		<parameter id="PreSSH" label="pre-ssh shell parameters"
			type="String" format="CopyValue" default="" readonly="false" visible="true" />

		<parameter id="ShellSwitches" label="Shell switches" type="String"
			format="CopyValue" default="-c" readonly="false" visible="true" />

		<parameter id="TerminalMode" type="BoolYesNo" format="None"
			default="false" label="Force terminal mode for the remote program" />

		<parameter id="SSHSwitches" label="Other ssh switches"
			type="String" format="CopyValue" default="" readonly="false" visible="true" />


		<parameter id="VivadoRelease" label="Vivado release number (part of the path)"
			type="String" format="CopyValue" default="2013.4" readonly="false"
			visible="true" />

		<parameter id="VivadoInstallationRoot" label="Vivado Installation Root"
			type="String" format="CopyValue" default="/opt/Xilinx/Vivado" readonly="false"
			visible="true" />
			
		<parameter id="VivadoRelativeExeOptions" label="Vivado relative executable path and options"
			type="String" format="CopyValue" default="bin/vivado -mode tcl" readonly="false"
			visible="true" />

		<parameter id="VivadoUnisimsPath" label="Relative location of Xilinx unisims library"
			type="String" format="CopyValue" default="data/verilog/src" readonly="false"
			visible="true" />
<!-- /opt/Xilinx/Vivado/2013.4/bin/vivado -mode tcl -->
		<parameter id="RemoteCommand" label="Remote ssh command"
			type="String" format="CopyValue"
			default="%VivadoInstallationRoot/%VivadoRelease/%VivadoRelativeExeOptions"
			readonly="true"
			visible="true" />
		<parameter id="VivadoUnisimsAbsolutePath" label="Full path of Xilinx unisims primitives library"
			type="String" format="CopyValue"
			default="%VivadoInstallationRoot/%VivadoRelease/%VivadoUnisimsPath"
			readonly="true"
			visible="true" />
			

		<parameter id="SSHExtra" label="ssh extra parameters" type="String"
			format="CopyValue" default="" readonly="false" visible="true" />

		<parameter id="VivadoConsole" default="Vivado" label="Vivado console name"
			type="String" format="CopyValue" visible="true" readonly="false"/>
			
	<!-- 
	
	 -->
			
	     <input>
			<group name="VivadoServer" label="Vivado server setup">
				"RemoteHost"
				"RemoteUser"
				"TerminalMode"
				"ShellSwitches"
				"PreSSH"
				"SSHSwitches"
				"SSHExtra"
				"VivadoConsole"
				"VivadoRelease"
				"VivadoInstallationRoot"
				"VivadoRelativeExeOptions"
				"VivadoUnisimsPath"
				"RemoteCommand"
				"VivadoUnisimsAbsolutePath"
			</group>
		</input>
	              
	
	</package>

	<project name="FPGA_project" label="Project parameters for FPGA_project"
	    package="FPGA_package"
		interface="FPGAPprojectInterface">
		<!--  Simulation parameters  -->
		<parameter id="SimulationTopFile" label="Project top simulation file"
			type="Filename" default="" format="CopyValue"
			readonly="false" />
		<parameter id="SimulationTopModule" label="Project top simulation module"
			type="String" default="" format="CopyValue" readonly="false" />
		<parameter id="ImplementationTopFile" label="Project file with top implementation module"
			type="Filename" default="" format="CopyValue" readonly="false" />
		<parameter id="SimulDir" label="project simulation directory"
			type="Pathname" default="simulation" format="CopyValue" readonly="false" />
		<!--  Vivado parameters  -->
		<parameter	id="part"             label= "Xilinx device to use"
        		default="" visible="true" omit="" type="String" format="Dash"/>
		<parameter id="VivadoProjectRoot" label="Relative (to user home directory) path of the workspace on Vivado server"
			type="String" default="vdt" format="RemoteRootSyntax" readonly="false" />

		<parameter id="VivadoLocalDir" label="Project subdirectroy for Vivado files"
			type="Pathname" default="vivado" format="CopyValue" readonly="false" />

		<parameter id="VivadoIgnoreSource" label="Ignore source files that match this regular expression"
			type="String" default=".*unisims.*" format="CopyValue" readonly="false" />
<!-- Calculated -->
		<parameter id="VivadoProjectRoot" label="Relative (to user home directory) path of the project on Vivado server"
			type="String" default="vdt" format="RemoteRootSyntax" readonly="false" />
			
	 	    <parameter id="SnapshotSynth"
	        label="name of Vivado snapshot archive after synthesis"
	        default="%%ProjectName-synth.dcp"
			type="String" format="CopyValue" />

	 	    <parameter id="SnapshotOptPlace"
	        label="name of Vivado snapshot archive after optimization/placement"
	        default="%%ProjectName-opt-pace.dcp"
			type="String" format="CopyValue" />

 				"" <!--  same as in project -->



<!-- Invisible (calculated) project-wide parameters -->			
		<parameter id="SimulDirSlash" type="Pathname" visible="false"
		 default="?%SimulDir=:,%SimulDir/" format="CopyValue"/>
		<parameter id="SedPaths" type="String" format="CopyValue"
		label="Remote file prefix to be removed for the local error parser"
		default="sed -u 's@/home/%RemoteUser/%VivadoProjectRoot/%%ProjectName/@@'"/>
		
			
		<input>
			<group name="Simulation" label="Simulation properties">
				"SimulationTopFile"
				"SimulationTopModule"
				"ImplementationTopFile"
				"SimulDir"
			</group>
			<group name="Vivado" label="Vivado general properties">
			    "part"
				"VivadoProjectRoot"
				"VivadoLocalDir"
				"VivadoIgnoreSource"
				"SedPaths"
			</group>
			<!--  TODO: make time-stamped and "latest" for snapshots -->
			<group name="VivadoSnapshots" label="Vivado snapshot archive names">
				"SnapshotSynth"
				"SnapshotOptPlace"
			</group>
		</input>
		<output>
		</output>
	</project>
</vdt-project>
<!--   				"| sed -u 's@/home/xilinx/vdt/npmtest/@@'"  -->